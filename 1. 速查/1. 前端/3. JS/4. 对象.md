# 1. 对象合并

### 方法一：Obj.assign()：可以把任意多个的源对象自身的可枚举属性拷贝给目标对象，然后返回目标对象

```javascript

let o1 = { a: 1 };
let o2 = { b: 2 };

let obj = Object.assign(o1, o2);
console.log(obj); // { a: 1, b: 2 }
console.log(o1);  // { a: 1, b: 2 }, 且 **目标对象** 自身也会改变（也就是assign第一个对象）
console.log(o2); // { b: 2 } 不改变

// 备注：Object.assign() 拷贝的是属性值。假如源对象的属性值是一个指向对象的引用，它也只拷贝那个引用值
// 备注：数组合并用 concat() 方法
```

### 方法二：$.extend()（抽时间看一下实现原理）

---

# 2. 浅拷贝，深拷贝

### 方法一：浅拷贝：意思就是只复制引用（指针），而未复制真正的值

https://www.cnblogs.com/dabingqi/p/8502932.html

```javascript

// 最简单的利用 = 赋值操作符实现了一个浅拷贝
let obj1 = {
  name: '朱昆鹏'
}

let obj2 = obj1; // 完成了浅拷贝

```

### 方法二：深拷贝：目标的完全拷贝（只要进行了深拷贝，它们老死不相往来，谁也不会影响谁）

```javascript
// 目前实现深拷贝的方法不多，主要是两种：
// 01：利用递归来实现每一层都重新创建对象并赋值（推荐使用）
// 02：利用 JSON 对象中的 parse 和 stringify（有些属性会被忽略，所以不能使用）


// 01递归方法案例：对每一层的数据都实现一次 创建对象->对象赋值 的操作
function deepClone(source){
  const targetObj = source.constructor === Array ? [] : {}; // 判断复制的目标是数组还是对象
  for(let keys in source){ // 遍历目标
    if(source.hasOwnProperty(keys)){
      if(source[keys] && typeof source[keys] === 'object'){ // 如果值是对象，就递归一下
        targetObj[keys] = source[keys].constructor === Array ? [] : {};
        targetObj[keys] = deepClone(source[keys]);
      }else{ // 如果不是，就直接赋值
        targetObj[keys] = source[keys];
      }
    }
  }
  return targetObj;
}

const obj1 = {
  name:'axuebin',
  sayHello:function(){
    console.log('Hello World');
  }
}
const obj2 = deepClone(obj1);
console.log(obj2); // {name: "axuebin", sayHello: ƒ}
console.log(obj1 === obj2); // false


// 02方法示例
const obj3 = {
  name:'axuebin',
  sayHello:function(){
    console.log('Hello World');
  }
}
console.log(JSON.parse(JSON.stringify(obj3)); // {name: "axuebin"} ???
// undefined、function、symbol 会在转换过程中被忽略，所以就不能用这个方法进行深拷贝

```

### 拓展：首层浅拷贝

```javascript

function shallowClone(source) {
  const targetObj = source.constructor === Array ? [] : {}; // 判断复制的目标是数组还是对象
  for (let keys in source) { // 遍历目标
    if (source.hasOwnProperty(keys)) {
      targetObj[keys] = source[keys];
    }
  }
  return targetObj;
}

const originObj = {
  a:'a',
  b:'b',
  c:[1, 2, 3],
  d:{ dd: 'dd' }
};

const cloneObj = shallowClone(originObj);
console.log(cloneObj === originObj); // false
cloneObj.a = 'aa';
cloneObj.c = [1, 1, 1];
cloneObj.d.dd = 'surprise';

console.log(cloneObj); // {a:'aa',b:'b',c:[1,1,1],d:{dd:'surprise'}}
console.log(originObj); // {a:'a',b:'b',c:[1,2,3],d:{dd:'surprise'}}

```

---


