# 2.Vue基本使用

---

## 🔥前言

---

### 1.第一个Vue项目

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    
    <div id="app">

        <!-- 模板语法 -->
        {{ message }}

        <!-- v-if 条件判断 -->
        <div v-if="isShow">我显示了 😄</div>
        <div v-else>我不应该显示 😢</div>

        <!-- v-for 循环 -->
        <template v-for="item in liData">
            <p>{{ item }}</p>
        </template>

        <!-- v-on 事件绑定 简写 @... -->
        <button v-on:click="clickTest">点击事件</button>

        <!-- v-bind Class与Style绑定 简写 :... -->
        <div :style="getStyle">v-bind绑定 class 和 style</div>

        <!-- v-model 双向数据绑定 -->
        <input v-model="message">

        <!-- 自定义组件 -->
        <ul>
            <zhu-li :item="item" v-for="item in lis"></zhu-li>
        </ul>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/vue"></script>
    <script>
        Vue.component('zhu-li', {
            props: ['item'],
            template: "<li>{{item}}</li>"
        })

        new Vue({
            el: '#app',
            data() {
                return {
                    message: 'Hello World!',
                    isShow: true,
                    liData: [1, 2, 3, 4, 5],
                    lis: [6, 7, 8, 9]
                }
            },
            // 计算属性
            computed: {
                getStyle () {
                    return {
                        width: "100px",
                        height: "100px",
                        background: "#ddd"
                    }
                }
            },
            // 事件
            methods: {
                clickTest() {
                    console.log('我是点击事件：clickTest')
                }
            }
        })
    </script>
</body>
</html>
```

---

**Vue.component的缺点**

- 全局定义：强制要求每个 component 中的命名不得重复
- 字符串模板：缺乏语法高亮，在HTML有多行时候，不利于书写
- 不支持CSS：当HTML和JavaScript组件化时，CSS被明显遗漏
- ❣️：所有我们有一种更好的书写方式：.vue 单文件书写（现在一般借助 Vue-cli 构建）

---

### 2.初识单文件系统（使用Vue-cli构建）

- 创建：vue create demo
- 组件书写方法和原生的不太一样，并且具有提示，热更新等功能

---

**插槽**

- 父组件 用属性的方式来传递值给子组件，子组件通过 props 来进行接受，这种我知道
- 但是你要父组件要传给 子组件一个DOM 结构，这个通过属性传肯定就不行了，这个时候就要用 **插槽** 了
- 作用域插槽：子组件可以 传递 一些状态给父组件使用

- [这个讲的不错](https://time.geekbang.org/course/detail/163-87489)

---

**局部样式的实现原理**

```html
<style scoped>
.item {
    width: 100px;
}

</style>
```

会变成：.item[data-v-*******] 的形式，所以不会污染其他地方

---

### 3.Vue组件的核心概念：属性

**组件是一个个独立的，可以复用的 UI模块**

<img src="https://itzkp-1253302184.cos.ap-beijing.myqcloud.com/notes/2.notes/5.MVVM%E6%A1%86%E6%9E%B6%EF%BC%88Vue%EF%BC%89/Vue%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/1.Vue%E7%BB%84%E4%BB%B6%E7%B3%BB%E7%BB%9F%E6%A6%82%E8%BF%B0.png" />

<img src="https://itzkp-1253302184.cos.ap-beijing.myqcloud.com/notes/2.notes/5.MVVM%E6%A1%86%E6%9E%B6%EF%BC%88Vue%EF%BC%89/Vue%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/2.Vue%E7%BB%84%E4%BB%B6%E5%B1%9E%E6%80%A7.png" />


```js
export default {
    name: 'demo',
    // props: ['name', 'list', ...],
    props: {
        name: String,
        list: {
            type: Array,
            default: []
        }
        ...
    }

}
```

**思考**：子组件为何不可以修改父组件传递的 prop 的值？（单向数据流），如果修改了，Vue是如何监控到属性的修改并给出警告的呢？

---

### 4.Vue组件的核心概念：事件

<img src="https://itzkp-1253302184.cos.ap-beijing.myqcloud.com/notes/2.notes/5.MVVM%E6%A1%86%E6%9E%B6%EF%BC%88Vue%EF%BC%89/Vue%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/3.%E7%BB%84%E4%BB%B6%E4%BA%8B%E4%BB%B6.png" />

```js
<template>
    <div>
        <button @click="clickBtn"></button>
        <button @click.stop="clickStopBtn"></button>
    </div>
</template>

export default {
    // ...
    methods: {
        clickBtn (e) {
            console.log('clickBtn e', e)
        },
        clickStopBtn (e) {
            console.log('clickStopBtn 阻止冒泡 e', e)
        }
    }
}
```

**思考**：this.$emit的返回值是什么？

---

### 5.Vue组件的核心概念：插槽

<img src="https://itzkp-1253302184.cos.ap-beijing.myqcloud.com/notes/2.notes/5.MVVM%E6%A1%86%E6%9E%B6%EF%BC%88Vue%EF%BC%89/Vue%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/4.%E7%BB%84%E4%BB%B6%E6%8F%92%E6%A7%BD.png" />



<img src="https://itzkp-1253302184.cos.ap-beijing.myqcloud.com/notes/2.notes/5.MVVM%E6%A1%86%E6%9E%B6%EF%BC%88Vue%EF%BC%89/Vue%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/5.%E7%BB%84%E4%BB%B6%E5%B1%9E%E6%80%A7%E8%A7%A3%E9%87%8A.png">

**思考**：相同名称的插槽是合并还是替换？

---

### 6.双向绑定和单向数据流的问题

- 双向绑定：数据更新，视图更新，视图改变，数据改变
- 单向数据流：数据更新，视图更新
- Vue是单向数据流，所谓的 双向绑定 在Vue中不过是语法糖而已，Vue底层是用 Object.defineProperty 来做响应式更新的，和双向绑定没关系
- ❣️这里我可以自己试着做一个双向数据绑定

```js
// 自己借助 Object.defineProperty 来实现一个 双向绑定
```

---

### 7.理解虚拟DOM及key属性的作用

**jQuery时代，给我们提供了非常方便的事件API，让我们可以很方便的操作DOM，但是事件多了就比较乱了**

<img src="https://itzkp-1253302184.cos.ap-beijing.myqcloud.com/notes/2.notes/5.MVVM%E6%A1%86%E6%9E%B6%EF%BC%88Vue%EF%BC%89/Vue%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/6.jquery%E6%93%8D%E4%BD%9CDOM%E7%9A%84%E7%A4%BA%E4%BE%8B.png" />

<img src="https://itzkp-1253302184.cos.ap-beijing.myqcloud.com/notes/2.notes/5.MVVM%E6%A1%86%E6%9E%B6%EF%BC%88Vue%EF%BC%89/Vue%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/7.Vue%E6%93%8D%E4%BD%9CDOM%E7%9A%84%E7%A4%BA%E4%BE%8B.png" />


```js
// 手写 diff 算法
```

**思考**：为什么不用index作为key？

---

### 8.如何触发组件的更新

- 数据来源（单向的）
    - 来自父元素的属性
    - 来自组件自身的状态 data
    - 来自状态管理器，如 vuex，Vue.observable

```js
export default {

    data() {
        let name = '朱昆鹏' // 这个更新的话，没办法被监听到

        return {
            age: 21, // 这个被更新可以被监听到，如果组件引用了，能触发组件更新
            obj: {
                demo2: undefined;
            }
        }

        // obj.demo = '' 这样赋值 不会被监听到
        // obj.demo2 = '' 这样赋值 可以被监听到
    }

}
```

<img src="https://itzkp-1253302184.cos.ap-beijing.myqcloud.com/notes/2.notes/5.MVVM%E6%A1%86%E6%9E%B6%EF%BC%88Vue%EF%BC%89/Vue%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/8.vue%E5%93%8D%E5%BA%94%E5%BC%8F%E5%8E%9F%E7%90%86.png" />

**思考**：数组有哪些方法支持响应式更新，如果不支持如何处理，底层原理如何实现？

---




