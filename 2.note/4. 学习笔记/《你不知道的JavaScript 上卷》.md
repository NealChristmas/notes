# 《你不知道的JavaScript 上卷》

## 第一部分 作用域和闭包

### 第1章 作用域是什么

**作用域是一套规则，用于确定在何处，以及如何查找变量（标识符）。**

如果查询的目的是对变量进行赋值，那么就会使用LHS查询；如果目的是获取变量的值，就会使用RHS查询。

- RHS查找 和 LHS查找（RHS查找表示 去的某某值，LHS差查找表示 赋值操作的目标是谁）
  - RHS查询如果在所有嵌套（作用域有嵌套，会从最里面往外面找）中遍寻不到所需的变量，引擎就会抛出**ReferenceError异常**
  - LHS查询时候，如果也查不到所需的变量，全局作用域会创建一个具有该名称的变量，返回给引擎（在严格模式下不行，会给引擎返回**ReferenceError异常**）


```js
function foo(a) {
  var b = a;
  return a + b;
}
var c = foo(2)

// RHS查找有 foo(), a, a, b 四处
// LHS查找有 a = ..., c=... , b = ..., 三处

```

- JavaScript引擎首先会在代码执行前对其进行编译，在这个过程中，像 var a = 2 这样的声明会被分解成两个独立的步骤
  - 1. 首先，var a在其作用域中声明变量。这会在最开始的阶段，也就是代码执行前进行。
  - 2. 接下来，a = 2会查询（LHS查询）变量a并对其进行赋值

---

### 第2章：词法作用域

晚上分析能力下降了好多，这里先写到这里，这里等早上在地铁上看完书之后，就离开开始写，这样好一点


